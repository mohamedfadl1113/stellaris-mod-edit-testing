# Vanilla Decisions

# Penal & Resort Colonies - Adapted to be applicable to Megastructures as well
# Penal Colony
decision_penal_colony = {
	owned_planets_only = yes

	prerequisites = {
		"tech_penal_colonies"
	}

	resources = {
		category = decisions
		cost = {
			unity = 1000
		}
	}

	potential = {
		is_capital = no
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		owner = {
			is_regular_empire = yes
		}
		# Applicable to Shellworlds as well
		OR = {
			is_artificial = no
			AND = {
				is_artificial = yes
				is_planet_class = pc_shellworld_core
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_shellworld_core_city
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_shellworld_core_gaia
			}
		}
		NOT = {
			owner = {
				any_owned_planet = { has_modifier = penal_colony }
			}
		}
		NOT = { has_designation = col_nanotech_world }
	}

	effect = {
		add_modifier = {
			modifier = penal_colony
			days = -1
		}
		hidden_effect = { validate_planet_buildings_and_districts = yes }
	}

	ai_weight = {
		weight = 1
		# Let's make things more interesting for AI
		modifier = {
			add = 20
			OR = {
				is_planet_class = pc_nuked
				has_planet_flag = shellworld
				has_planet_flag = double_shellworld
				has_planet_flag = triple_shellworld
			}
		}
	}
}

decision_abolish_penal_colony = {
	owned_planets_only = yes
	icon = decision_penal_colony

	resources = {
		category = decisions
		cost = {
			unity = 2500
		}
	}

	potential = {
		has_modifier = penal_colony
	}

	effect = {
		remove_modifier = penal_colony
		hidden_effect = { validate_planet_buildings_and_districts = yes }
	}

	ai_weight = {
		weight = 0
	}
}

# Thrall-World
decision_slave_colony = {
	owned_planets_only = yes

	enactment_time = 180
	prerequisites = {
		"tech_slave_colonies"
	}

	resources = {
		category = decisions
		cost = {
			unity = 1000
		}
	}


	potential = {
		is_capital = no
		NOT = { is_planet_class = pc_city }
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = penal_colony }
		NOT = { has_modifier = slave_colony }
		owner = {
			is_regular_empire = yes
		}
		# Applicable to Shellworlds as well
		OR = {
			is_artificial = no
			AND = {
				is_artificial = yes
				is_planet_class = pc_shellworld_core
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_shellworld_core_city
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_shellworld_core_gaia
			}
		}
		NOT = { has_designation = col_nanotech_world }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_slave_colony_must_have_slave
			any_owned_pop_group = {
				has_citizenship_type = { type = citizenship_slavery country = owner }
			}
		}
		custom_tooltip = {
			fail_text = decision_resort_colony_no_districts
			num_districts = { type = any value < 2 }
			num_buildings = { type = any value < 2 }
		}
	}


	effect = {
		custom_tooltip = decision_slave_colony_effects
		add_modifier = {
			modifier = slave_colony
			days = -1
		}
		hidden_effect = { validate_planet_buildings_and_districts = yes }
	}

	ai_weight = {
		weight = 1
		# Let's make things more interesting for AI
		modifier = {
			add = 20
			OR = {
				is_planet_class = pc_nuked
				has_planet_flag = shellworld
				has_planet_flag = double_shellworld
				has_planet_flag = triple_shellworld
			}
		}
	}
}

# Resort Colony
decision_resort_colony = {
	owned_planets_only = yes

	enactment_time = 180
	prerequisites = {
		"tech_resort_colonies"
	}

	resources = {
		category = decisions
		cost = {
			unity = 1000
		}
	}


	potential = {
		is_capital = no
		NOR = {
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = resort_colony
			is_planet_class = pc_city
			AND = {
				is_planet_class = pc_nuked
				NOR = {
					owner = {
						OR = {
							is_memorialist_empire = yes
							has_trait = trait_survivor
							has_trait = trait_pc_nuked_preference
							has_trait = trait_plantoid_radiotrophic
						}
					}
				}
			}
			AND = {
				is_planet_class = pc_relic
				NOT = { owner = { is_memorialist_empire = yes } }
			}
		}
		owner = {
			is_regular_empire = yes
		}
		# Applicable to Gaia Shellworlds + BWC as well
		OR = {
			is_artificial = no
			AND = {
				is_artificial = yes
				is_planet_class = pc_shellworld_core_gaia
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_hoopworld
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_discworld
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_freesphere
			}
			AND = {
				is_artificial = yes
				is_planet_class = pc_gas_giant_shellworld
			}
		}
		NOT = { has_designation = col_nanotech_world }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_resort_colony_no_districts
			num_districts = { type = district_farming value < 1 }
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
			num_districts = { type = district_farming_uncapped value < 1 }
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		custom_tooltip = {
			fail_text = decision_resort_colony_only_one
			NOT = {
				owner = {
					any_owned_planet = { has_modifier = resort_colony }
				}
			}
		}
		custom_tooltip = {
			fail_text = decision_cant_be_building_anything
			has_building_construction = no
		}
	}


	effect = {
		add_modifier = {
			modifier = resort_colony
			days = -1
		}
		hidden_effect = {
			remove_building = building_colony_shelter
			remove_building = building_capital
			remove_building = building_major_capital
			remove_building = building_system_capital
			add_building = building_resort_capital
		}
		hidden_effect = {
			validate_planet_buildings_and_districts = yes
		}
	}

	ai_weight = {
		weight = 1
		# Let's make things more interesting for AI
		modifier = {
			add = 20
			OR = {
				is_planet_class = pc_gaia
				is_planet_class = pc_shellworld_core_gaia
				is_planet_class = pc_gas_giant_shellworld
			}
		}
		modifier = {
			add = 25
			OR = {
				is_planet_class = pc_hoopworld
				is_planet_class = pc_discworld
				is_planet_class = pc_freesphere
				is_planet_class = pc_edersphere
			}
		}
	}
}

decision_abolish_resort_colony = {
	owned_planets_only = yes
	icon = decision_resort_colony

	resources = {
		category = decisions
		cost = {
			unity = 2500
		}
	}

	potential = {
		has_modifier = resort_colony
	}

	effect = {
		remove_modifier = resort_colony
		hidden_effect = {
			remove_building = building_resort_capital
			add_building = building_colony_shelter
		}
		hidden_effect = { validate_planet_buildings_and_districts = yes }
	}

	ai_weight = {
		weight = 0
	}
}